<!DOCTYPE html>
<html>
<head>
  <title>OceanPulse AI â€“ Satellite Detected Ships</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=api here"></script>
</head>
<body style="margin:0">
<div id="map" style="width:100vw;height:100vh"></div>

<script>
const map = new google.maps.Map(document.getElementById("map"), {
  zoom: 7,
  center: { lat: 51, lng: 1.3 },
  mapTypeId: "satellite"
});

fetch("/ships")
  .then(res => res.json())
  .then(data => {
    data.forEach(d => {
      const s = d.ship;

      new google.maps.Circle({
        map,
        center: { lat: s.lat, lng: s.lon },
        radius: 500,
        fillColor: "#00ffff",
        fillOpacity: 1,
        strokeWeight: 0
      });

      if (d.beaching) {
        new google.maps.Polyline({
          map,
          path: d.path.map(p => ({ lat: p[0], lng: p[1] })),
          strokeColor: "#ff0000",
          strokeWeight: 3
        });
        data.forEach(d => {
  const ship = d.ship;

  // ðŸ”µ Ship dot
  new google.maps.Circle({
    map,
    center: { lat: ship.lat, lng: ship.lon },
    radius: 500,
    fillColor: "#00ffff",
    fillOpacity: 0.9,
    strokeWeight: 0
  });

  // ðŸ”´ Waste drift path
  if (d.path && d.path.length > 1) {
    new google.maps.Polyline({
      map,
      path: d.path.map(p => ({ lat: p[0], lng: p[1] })),
      strokeColor: d.beaching ? "#ff0000" : "#ffaa00",
      strokeOpacity: 0.9,
      strokeWeight: 3
    });
  }
});

      }
    });
  });
</script>
</body>
</html>
